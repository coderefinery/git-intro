
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Conflict resolution &#8212; Introduction to version control with Git  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_lesson.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_rtd_theme_ext_color_contrast.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/minipres.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <link rel="shortcut icon" href="../_static/coderefinery.ico"/>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Sharing repositories online" href="../remotes/" />
    <link rel="prev" title="Branching and merging" href="../branches/" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../">
      
      
      
      <h1 class="site-logo" id="site-title">Introduction to version control with Git  documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search/" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p class="caption" role="heading">
 <span class="caption-text">
  Core episodes
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../motivation/">
   Motivation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../basics/">
   Basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../branches/">
   Branching and merging
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Conflict resolution
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../remotes/">
   Sharing repositories online
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../archaeology/">
   Inspecting history
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../level/">
   Practical advice: how much Git is necessary?
  </a>
 </li>
</ul>
<p class="caption" role="heading">
 <span class="caption-text">
  Optional episodes
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../staging-area/">
   Using the Git staging area
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../recovering/">
   Undoing and recovering
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../interrupted/">
   Interrupted work
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../aliases/">
   Aliases and configuration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../under-the-hood/">
   Git under the hood
  </a>
 </li>
</ul>
<p class="caption" role="heading">
 <span class="caption-text">
  Reference
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../exercises/">
   List of exercises
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../guide/">
   Instructor guide
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../reference/">
   Quick reference
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../customizing/">
   Customizing Git
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../resources/">
   Other resources
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/conflicts.md.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conflicts-in-git-and-why-they-are-good">
   Conflicts in Git and why they are good
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#preparing-a-conflict">
   Preparing a conflict
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#merging-conflicting-changes">
   Merging conflicting changes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#manual-resolution">
   Manual resolution
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-create-and-resolve-a-conflict">
   Exercise: Create and resolve a conflict
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#optional-exercises-with-conflict-resolution">
   Optional exercises with conflict resolution
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-ours-or-theirs-strategy">
   Using “ours” or “theirs” strategy
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#aborting-a-conflicting-merge">
   Aborting a conflicting merge
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#avoiding-conflicts">
   Avoiding conflicts
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Conflict resolution</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conflicts-in-git-and-why-they-are-good">
   Conflicts in Git and why they are good
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#preparing-a-conflict">
   Preparing a conflict
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#merging-conflicting-changes">
   Merging conflicting changes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#manual-resolution">
   Manual resolution
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-create-and-resolve-a-conflict">
   Exercise: Create and resolve a conflict
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#optional-exercises-with-conflict-resolution">
   Optional exercises with conflict resolution
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-ours-or-theirs-strategy">
   Using “ours” or “theirs” strategy
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#aborting-a-conflicting-merge">
   Aborting a conflicting merge
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#avoiding-conflicts">
   Avoiding conflicts
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="conflict-resolution">
<span id="id1"></span><h1>Conflict resolution<a class="headerlink" href="#conflict-resolution" title="Permalink to this headline">#</a></h1>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Understand merge conflicts sufficiently well to be able to fix them.</p></li>
</ul>
</div>
<div class="admonition-instructor-note instructor-note admonition" id="instructor-note-0">
<p class="admonition-title">Instructor note</p>
<ul class="simple">
<li><p>15 min teaching/type-along</p></li>
<li><p>15 min exercise</p></li>
</ul>
</div>
<section id="conflicts-in-git-and-why-they-are-good">
<h2>Conflicts in Git and why they are good<a class="headerlink" href="#conflicts-in-git-and-why-they-are-good" title="Permalink to this headline">#</a></h2>
<p>Imagine we start with the following text file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">avocados</span>
<span class="mi">1</span> <span class="n">tbsp</span> <span class="n">cilantro</span>
<span class="mi">2</span> <span class="n">tsp</span> <span class="n">salt</span>
</pre></div>
</div>
<p>On branch A somebody modifies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="mi">1</span> <span class="n">lime</span>
</span><span class="mi">2</span> <span class="n">avocados</span>
<span class="hll"><span class="mi">1</span><span class="o">/</span><span class="mi">2</span> <span class="n">tbsp</span> <span class="n">cilantro</span>
</span><span class="mi">2</span> <span class="n">tsp</span> <span class="n">salt</span>
</pre></div>
</div>
<p>On branch B somebody else modifies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span> <span class="n">avocados</span>
<span class="hll"><span class="mi">2</span> <span class="n">tbsp</span> <span class="n">cilantro</span>
</span><span class="mi">2</span> <span class="n">tsp</span> <span class="n">salt</span>
<span class="hll"><span class="mi">1</span><span class="o">/</span><span class="mi">2</span> <span class="n">onion</span>
</span></pre></div>
</div>
<p>When we try to merge Git will figure out that we want the lime and the onion
but does not know whether to reduce or increase the amount of cilantro:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>1 lime
2 avocados
<span class="hll">??????????????
</span>2 tsp salt
1/2 onion
</pre></div>
</div>
<p>Git is very good at resolving modifications when merging branches and
in most cases a <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code> runs smooth and automatic.
Then a merge commit appears (unless fast-forward) without you even noticing.</p>
<p>But sometimes the <strong>same portion</strong> of the code/text is modified on two branches<strong>in two different ways</strong> and Git issues a <strong>conflict</strong>.
Then you need to tell Git which version to keep (<strong>resolve</strong> it).</p>
<p>There are several ways to do that as we will see.</p>
<p>Please remember:</p>
<ul class="simple">
<li><p>It is good that Git conflicts exist: Git will not silently overwrite one of
two differing modifications.</p></li>
<li><p>Conflicts may look scary, but are not that bad after a little bit of
practice. Also they are luckily rare.</p></li>
<li><p>Don’t be afraid of Git because of conflicts. You may not meet some conflicts
using other systems because you simply can’t do the kinds of things you do
in Git.</p></li>
<li><p>You can take human measures to reduce them.</p></li>
</ul>
<hr class="docutils" />
<div class="admonition-the-human-side-of-conflicts discussion attention admonition" id="discussion-0">
<p class="admonition-title">The human side of conflicts</p>
<ul class="simple">
<li><p>What does it mean if two people do the same thing in two different ways?</p></li>
<li><p>What if you work on the same file but do two different things in the different sections?</p></li>
<li><p>What if you do something, don’t tell someone from 6 months, and then try to combine it with other people’s work?</p></li>
<li><p>How are conflicts avoided in other work? (Only one person working at once?
Declaring what you are doing before you start, if there is any chance someone
else might do the same thing, helps.)</p></li>
<li><p>Minor conflicts (two people revise spelling) vs semantic (two people rewrite
a function to add two different new features). How did Git solve these in
branching/merging easily?</p></li>
</ul>
</div>
<p>Now we can go to show how Git controls when there is actually a conflict.</p>
</section>
<section id="preparing-a-conflict">
<h2>Preparing a conflict<a class="headerlink" href="#preparing-a-conflict" title="Permalink to this headline">#</a></h2>
<div class="admonition-instructor-note instructor-note admonition" id="instructor-note-1">
<p class="admonition-title">Instructor note</p>
<p>We do the following together as type-along.</p>
</div>
<p>We will make two branches, make two conflicting changes (both increase and
decrease the amount of cilantro), and later we will try to merge them
together.</p>
<ul>
<li><p>Create two branches from <code class="docutils literal notranslate"><span class="pre">master</span></code>: one called <code class="docutils literal notranslate"><span class="pre">like-cilantro</span></code>, one called <code class="docutils literal notranslate"><span class="pre">dislike-cilantro</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git branch like-cilantro master
<span class="gp">$ </span>git branch dislike-cilantro master
</pre></div>
</div>
</li>
<li><p>On the two branches make <strong>different modifications</strong> to the amount of the <strong>same ingredient</strong>:</p></li>
<li><p>On the branch <code class="docutils literal notranslate"><span class="pre">like-cilantro</span></code> we have the following change:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git diff master like-cilantro
</pre></div>
</div>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gh">diff --git a/ingredients.txt b/ingredients.txt</span><span class="w"></span>
<span class="gh">index a83af39..83f2f94 100644</span><span class="w"></span>
<span class="gd">--- a/ingredients.txt</span><span class="w"></span>
<span class="gi">+++ b/ingredients.txt</span><span class="w"></span>
<span class="gu">@@ -1,4 +1,4 @@</span><span class="w"></span>
<span class="gd">-* 1 tbsp cilantro</span><span class="w"></span>
<span class="gi">+* 2 tbsp cilantro</span><span class="w"></span>
<span class="w"> </span>* 2 avocados<span class="w"></span>
<span class="w"> </span>* 1 lime<span class="w"></span>
<span class="w"> </span>* 1 tsp salt<span class="w"></span>
</pre></div>
</div>
</li>
<li><p>And on the branch <code class="docutils literal notranslate"><span class="pre">dislike-cilantro</span></code> we have the following change:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git diff master dislike-cilantro
</pre></div>
</div>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gh">diff --git a/ingredients.txt b/ingredients.txt</span><span class="w"></span>
<span class="gh">index a83af39..2f60e23 100644</span><span class="w"></span>
<span class="gd">--- a/ingredients.txt</span><span class="w"></span>
<span class="gi">+++ b/ingredients.txt</span><span class="w"></span>
<span class="gu">@@ -1,4 +1,4 @@</span><span class="w"></span>
<span class="gd">-* 1 tbsp cilantro</span><span class="w"></span>
<span class="gi">+* 0.5 tbsp cilantro</span><span class="w"></span>
<span class="w"> </span>* 2 avocados<span class="w"></span>
<span class="w"> </span>* 1 lime<span class="w"></span>
<span class="w"> </span>* 1 tsp salt<span class="w"></span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="merging-conflicting-changes">
<h2>Merging conflicting changes<a class="headerlink" href="#merging-conflicting-changes" title="Permalink to this headline">#</a></h2>
<p>What do you expect will happen when we try to merge these two branches into
master?</p>
<p>The first merge will work:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git checkout master
<span class="gp">$ </span>git status
<span class="gp">$ </span>git merge like-cilantro

<span class="go">Updating 4b3e3cc..55d1ce2</span>
<span class="go">Fast-forward</span>
<span class="go"> ingredients.txt | 2 +-</span>
<span class="go"> 1 file changed, 1 insertion(+), 1 deletion(-)</span>
</pre></div>
</div>
<p>But the second will fail:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git merge dislike-cilantro

<span class="go">Auto-merging ingredients.txt</span>
<span class="go">CONFLICT (content): Merge conflict in ingredients.txt</span>
<span class="go">Automatic merge failed; fix conflicts and then commit the result.</span>
</pre></div>
</div>
<p>Without conflict Git would have automatically created a merge commit,
but since there is a conflict, Git did not commit:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git status

<span class="go">On branch master</span>
<span class="go">You have unmerged paths.</span>
<span class="go">  (fix conflicts and run &quot;git commit&quot;)</span>
<span class="go">  (use &quot;git merge --abort&quot; to abort the merge)</span>

<span class="go">Unmerged paths:</span>
<span class="go">  (use &quot;git add &lt;file&gt;...&quot; to mark resolution)</span>

<span class="go">	both modified:   ingredients.txt</span>

<span class="go">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span>
</pre></div>
</div>
<p>Git won’t decide which to take and we need to decide.  Observe how Git gives
us clear instructions on how to move forward.</p>
<p>Let us inspect the conflicting file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cat ingredients.txt

<span class="go">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span>
<span class="go">* 2 tbsp cilantro</span>
<span class="go">=======</span>
<span class="go">* 0.5 tbsp cilantro</span>
<span class="go">&gt;&gt;&gt;&gt;&gt;&gt;&gt; dislike-cilantro</span>
<span class="go">* 2 avocados</span>
<span class="go">* 1 lime</span>
<span class="go">* 1 tsp salt</span>
<span class="go">* 1/2 onion</span>
</pre></div>
</div>
<p>Git inserted resolution markers (the <code class="docutils literal notranslate"><span class="pre">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></code>, and <code class="docutils literal notranslate"><span class="pre">=======</span></code>).</p>
<p>Try also <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git diff
</pre></div>
</div>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gh">diff --cc ingredients.txt</span><span class="w"></span>
<span class="gh">index 83f2f94,2f60e23..0000000</span><span class="w"></span>
<span class="gd">--- a/ingredients.txt</span><span class="w"></span>
<span class="gi">+++ b/ingredients.txt</span><span class="w"></span>
<span class="gu">@@@ -1,4 -1,4 +1,8 @@@</span><span class="w"></span>
<span class="gi">++&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><span class="w"></span>
<span class="w"> </span>+* 2 tbsp cilantro<span class="w"></span>
<span class="gi">++=======</span><span class="w"></span>
<span class="gi">+ * 0.5 tbsp cilantro</span><span class="w"></span>
<span class="gi">++&gt;&gt;&gt;&gt;&gt;&gt;&gt; dislike-cilantro</span><span class="w"></span>
<span class="w"> </span> * 2 avocados<span class="w"></span>
<span class="w"> </span> * 1 lime<span class="w"></span>
<span class="w"> </span> * 1 tsp salt<span class="w"></span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code> now only shows the conflicting part, nothing else.</p>
<p>We have to resolve the conflict.
We will discuss 3 different ways to do this.</p>
</section>
<section id="manual-resolution">
<h2>Manual resolution<a class="headerlink" href="#manual-resolution" title="Permalink to this headline">#</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span> <span class="n">HEAD</span>
<span class="o">*</span> <span class="mi">2</span> <span class="n">tbsp</span> <span class="n">cilantro</span>
<span class="o">=======</span>
<span class="o">*</span> <span class="mf">0.5</span> <span class="n">tbsp</span> <span class="n">cilantro</span>
<span class="o">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> <span class="n">dislike</span><span class="o">-</span><span class="n">cilantro</span>
</pre></div>
</div>
<p>We have to edit the code/text between the resolution markers.  You
only have to care about what Git shows you: Git stages all files
without conflicts and leaves the files with conflicts unstaged.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Steps to resolve a conflict:</strong></p>
<ul class="simple">
<li><p>Check status with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code>.</p></li>
<li><p>Decide what you keep (the one, the other, or both or something
else).  Edit the file to do this.</p>
<ul>
<li><p>Remove the resolution markers, if not already done.</p></li>
<li><p>The file(s) should now look exactly how you want them.</p></li>
</ul>
</li>
<li><p>Check status with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code>.</p></li>
<li><p>Tell Git that you have resolved the conflict with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">ingredients.txt</span></code>
(if you use the Emacs editor with a certain plugin the editor may stage the
change for you after you have removed the conflict markers).</p></li>
<li><p>Verify the result with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code>.</p></li>
<li><p>Finally commit the merge with just <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code> - everything is pre-filled.</p></li>
</ul>
</div>
</section>
<section id="exercise-create-and-resolve-a-conflict">
<span id="exercise-conflicts"></span><h2>Exercise: Create and resolve a conflict<a class="headerlink" href="#exercise-create-and-resolve-a-conflict" title="Permalink to this headline">#</a></h2>
<div class="admonition-conflict-1-create-another-conflict-and-resolve exercise important admonition" id="exercise-0">
<p class="admonition-title">Conflict-1: Create another conflict and resolve</p>
<p>In this exercise, we repeat almost exactly what we did above with a
different ingredient.</p>
<ol class="arabic simple">
<li><p>Create two branches before making any modifications.</p></li>
<li><p>Again modify some ingredient on both branches.</p></li>
<li><p>Merge one, merge the other and observe a conflict, resolve the conflict and commit the merge.</p></li>
<li><p>What happens if you apply the same modification on both branches?</p></li>
<li><p>If you create a branch <code class="docutils literal notranslate"><span class="pre">like-avocados</span></code>, commit a change, then from this
branch create another banch <code class="docutils literal notranslate"><span class="pre">dislike-avocados</span></code>, commit again, and try to
merge both branches into <code class="docutils literal notranslate"><span class="pre">master</span></code> you will not see a conflict. Can you
explain, why it is different this time?</p></li>
</ol>
<div class="admonition-solution solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Solution</p>
<p>4: No conflict in this case if the change is the same.</p>
<p>5: No conflict in this case since in Git history one change happened after the other. The two changes
are related and linked by Git history and one is a Git ancestor of the
other. Git will assume that since we applied one change after the other,
we meant this. There is nothing to resolve.</p>
</div>
</div>
</section>
<section id="optional-exercises-with-conflict-resolution">
<span id="exercise-conflicts-optional"></span><h2>Optional exercises with conflict resolution<a class="headerlink" href="#optional-exercises-with-conflict-resolution" title="Permalink to this headline">#</a></h2>
<div class="admonition-optional-conflict-2-resolve-a-conflict-when-rebasing-a-branch exercise important admonition" id="exercise-1">
<p class="admonition-title">(optional) Conflict-2: Resolve a conflict when rebasing a branch</p>
<ol class="arabic simple">
<li><p>Create two branches where you anticipate a conflict.</p></li>
<li><p>Try to merge them and observe that indeed they conflict.</p></li>
<li><p>Abort the merge with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span> <span class="pre">--abort</span></code>.</p></li>
<li><p>What do you expect will happen if you rebase one branch on top of the
other? Do you anticipate a conflict? Try it out.</p></li>
</ol>
<div class="admonition-solution solution important dropdown admonition" id="solution-1">
<p class="admonition-title">Solution</p>
<p>Yes, this will conflict. If it conflicts during a merge, it will also conflict
during rebase but the conflict resolution looks slightly different:
You still need to look for conflict markers but you tell Git that you resolved
a conflict with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> and then you continue with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rebase</span> <span class="pre">--continue</span></code>.
Follow instructions that you get from the Git command line.</p>
</div>
</div>
<div class="admonition-optional-conflict-3-resolve-a-conflict-using-mergetool exercise important admonition" id="exercise-2">
<p class="admonition-title">(optional) Conflict-3: Resolve a conflict using mergetool</p>
<ul>
<li><p>Again create a conflict (for instance disagree on the number of avocados).</p></li>
<li><p>Stop at this stage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Auto</span><span class="o">-</span><span class="n">merging</span> <span class="n">ingredients</span><span class="o">.</span><span class="n">txt</span>
<span class="n">CONFLICT</span> <span class="p">(</span><span class="n">content</span><span class="p">):</span> <span class="n">Merge</span> <span class="n">conflict</span> <span class="ow">in</span> <span class="n">ingredients</span><span class="o">.</span><span class="n">txt</span>
<span class="n">Automatic</span> <span class="n">merge</span> <span class="n">failed</span><span class="p">;</span> <span class="n">fix</span> <span class="n">conflicts</span> <span class="ow">and</span> <span class="n">then</span> <span class="n">commit</span> <span class="n">the</span> <span class="n">result</span><span class="o">.</span>
</pre></div>
</div>
</li>
<li><p>Instead of resolving the conflict manually, use a visual tool
(requires installing one of the <a class="reference external" href="https://coderefinery.github.io/installation/difftools/">visual diff tools</a>):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git mergetool
</pre></div>
</div>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/mergetool.png"><img alt="Conflict resolution using mergetool" src="../_images/mergetool.png" style="width: 100%;" /></a>
</figure>
</li>
<li><p>Your current branch is left, the branch you merge is right, result is in the middle.</p></li>
<li><p>After you are done, close and commit, <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> is not needed when using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">mergetool</span></code>.</p></li>
</ul>
<p>If you have not instructed Git to avoid creating backups when using mergetool, then to be on
the safe side there will be additional temporary files created. To remove those  you can do
a git clean after the merging.</p>
<p>To view what will be removed:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git clean -n
</pre></div>
</div>
<p>To remove:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git clean -f
</pre></div>
</div>
<p>To configure Git to avoid creating backups at all:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git config --global mergetool.keepBackup <span class="nb">false</span>
</pre></div>
</div>
</div>
</section>
<hr class="docutils" />
<section id="using-ours-or-theirs-strategy">
<h2>Using “ours” or “theirs” strategy<a class="headerlink" href="#using-ours-or-theirs-strategy" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Sometimes you know that you want to keep “ours” version (version on this branch)
or “theirs” (version on the merged branch).</p></li>
<li><p>Then you do not have to resolve conflicts manually.</p></li>
<li><p>See <a class="reference external" href="https://git-scm.com/docs/merge-strategies">merge strategies</a>.</p></li>
</ul>
<p>Example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git merge -s recursive -Xours less-avocados  <span class="c1"># merge and in doubt take the changes from current branch</span>
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git merge -s recursive -Xtheirs less-avocados  <span class="c1"># merge and in doubt take the changes from less-avocados branch</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="aborting-a-conflicting-merge">
<h2>Aborting a conflicting merge<a class="headerlink" href="#aborting-a-conflicting-merge" title="Permalink to this headline">#</a></h2>
<p>Sometimes you get a merge conflict but realize that you can’t solve it without
talking to a colleague (who created the other change) first. What to do?</p>
<p>You can abort the merge and postponing conflict resolution by resetting the
repository to <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> (last committed state):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git merge --abort
</pre></div>
</div>
<p>The repository looks then exactly as it was before the merge.</p>
</section>
<hr class="docutils" />
<section id="avoiding-conflicts">
<h2>Avoiding conflicts<a class="headerlink" href="#avoiding-conflicts" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Human measures</p>
<ul>
<li><p>Think and plan to which branch you will commit to.</p></li>
<li><p>Do not put unrelated changes on the same branch.</p></li>
</ul>
</li>
<li><p>Collaboration measures</p>
<ul>
<li><p>Open an issue and discuss with collaborators before starting a long-living</p></li>
<li><p>branch.</p></li>
</ul>
</li>
<li><p>Project layout measures</p>
<ul>
<li><p>Modifying global data often causes conflicts.</p></li>
<li><p>Modular programming minimizes risk of conflicts.</p></li>
</ul>
</li>
<li><p>Technical measures</p>
<ul>
<li><p><strong>Push early and often</strong> - this is one of the happy,
rare circumstances when everyone doing the selfish thing (pushing as
early as practical) results in best case for everyone!</p></li>
<li><p>Pull/rebase often to keep up to date with upstream.</p></li>
<li><p>Resolve conflicts early.</p></li>
</ul>
</li>
</ul>
<div class="admonition-discussion discussion attention admonition" id="discussion-1">
<p class="admonition-title">Discussion</p>
<p>Discuss how Git handles conflicts compared to the Google Drive.</p>
</div>
<div class="admonition-keypoints keypoints admonition" id="keypoints-0">
<p class="admonition-title">Keypoints</p>
<ul class="simple">
<li><p>Conflicts often appear because of not enough communication or not optimal
branching strategy.</p></li>
</ul>
</div>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../branches/" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Branching and merging</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../remotes/" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Sharing repositories online</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By CodeRefinery team<br/>
  
      &copy; Copyright CodeRefinery team.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>