

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inspecting history &mdash; Introduction to version control with Git  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=949a1ff5" />
      <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_lesson.css?v=e9df6548" />
      <link rel="stylesheet" type="text/css" href="../_static/term_role_formatting.css?v=4194e21c" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_rtd_theme_ext_color_contrast.css?v=8e8ea19f" />
      <link rel="stylesheet" type="text/css" href="../_static/style.css?v=791bfbd6" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=a5c4661c" />

  
    <link rel="shortcut icon" href="../_static/coderefinery.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=187304be"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=582ca9e2"></script>
      <script src="../_static/minipres.js?v=a0d29692"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script src="../_static/tabs.js?v=3030b3cb"></script>
      <script data-domain="coderefinery.github.io" defer="defer" src="https://plausible.cs.aalto.fi/js/script.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="How to turn your project to a Git repo and share it" href="../sharing/" />
    <link rel="prev" title="Cloning a Git repository and working locally" href="../local-workflow/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../" class="icon icon-home">
            Introduction to version control with Git
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../motivation/">Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/">Configuring Git command line and editor</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modifying an existing project</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../browsing/">Copy and browse an existing project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commits/">Recording changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../merging/">Merging changes and contributing to the project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../local-workflow/">Cloning a Git repository and working locally</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Studying an existing project</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Inspecting history</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#command-line-github-and-vs-code">Command line, GitHub, and VS Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#our-toolbox-for-history-inspection">Our toolbox for history inspection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#warm-up-git-history-browser">Warm-up: “Git History” browser</a></li>
<li class="toctree-l3"><a class="reference internal" href="#searching-text-patterns-in-the-repository">Searching text patterns in the repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inspecting-individual-commits">Inspecting individual commits</a></li>
<li class="toctree-l3"><a class="reference internal" href="#line-by-line-code-annotation-with-metadata">Line-by-line code annotation with metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inspecting-code-in-the-past">Inspecting code in the past</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#exercise">Exercise</a></li>
<li class="toctree-l2"><a class="reference internal" href="#finding-out-when-something-broke-changed-with-git-bisect">Finding out when something broke/changed with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#optional-exercise-git-bisect">Optional exercise: Git bisect</a></li>
<li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sharing your work</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sharing/">How to turn your project to a Git repo and share it</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Finding the balance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../level/">Practical advice: How much Git is necessary?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../what-to-avoid/">What to avoid</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Older episodes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../basics/">Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../branches/">Branching and merging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conflicts/">Conflict resolution</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Optional episodes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../staging-area/">Using the Git staging area</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recovering/">Undoing and recovering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interrupted/">Interrupted work</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aliases/">Aliases and configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../under-the-hood/">Git under the hood</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://youtu.be/xbTTDLA3txI">Shell crash course</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/">Quick reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../customizing/">Customizing Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/">Other resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises/">List of exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/">Instructor guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://coderefinery.github.io/git-intro/lesson.pdf">PDF version</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://coderefinery.org/lessons/core/">All lessons</a></li>
<li class="toctree-l1"><a class="reference external" href="https://coderefinery.org/">CodeRefinery</a></li>
<li class="toctree-l1"><a class="reference external" href="https://coderefinery.org/lessons/reusing/">Reusing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Introduction to version control with Git</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Inspecting history</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/coderefinery/git-intro/blob/main/content/archaeology.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="inspecting-history">
<h1>Inspecting history<a class="headerlink" href="#inspecting-history" title="Link to this heading"></a></h1>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Be able find a line of code, find out why it was introduced and when.</p></li>
<li><p>Be able to quickly find the commit that changed a behavior.</p></li>
</ul>
</div>
<div class="admonition-instructor-note instructor-note admonition" id="instructor-note-0">
<p class="admonition-title">Instructor note</p>
<ul class="simple">
<li><p>30 min teaching/type-along</p></li>
<li><p>20 min exercise</p></li>
</ul>
</div>
<section id="command-line-github-and-vs-code">
<h2>Command line, GitHub, and VS Code<a class="headerlink" href="#command-line-github-and-vs-code" title="Link to this heading"></a></h2>
<p>As usual, we offer ways to do this with the command line, VS Code, and
GitHub.</p>
<ul class="simple">
<li><p><strong>Command line</strong> is most powerful and relatively easy with this.
You may also use it along with other things. If you haven’t tried
it yet, we’d recommend you to give it a try.</p></li>
<li><p>The <strong>GitHub</strong> web interface allows many things to be done, but not
everything.</p></li>
<li><p><strong>VS Code</strong> allows some of these, but for some it’s easier to open
the VS Code terminal and run Git there.</p></li>
</ul>
</section>
<section id="our-toolbox-for-history-inspection">
<h2>Our toolbox for history inspection<a class="headerlink" href="#our-toolbox-for-history-inspection" title="Link to this heading"></a></h2>
<div class="admonition-instructor-note instructor-note admonition" id="instructor-note-1">
<p class="admonition-title">Instructor note</p>
<p>First the instructor demonstrates few commands on a real life example
repository <a class="reference external" href="https://github.com/networkx/networkx">https://github.com/networkx/networkx</a> (mentioned in the amazing site <a class="reference external" href="https://programminghistorian.org/">The
Programming Historian</a>).
Later we will practice these in an archaeology exercise (below).</p>
</div>
<section id="warm-up-git-history-browser">
<h3>Warm-up: <a class="reference external" href="https://githistory.xyz/">“Git History” browser</a><a class="headerlink" href="#warm-up-git-history-browser" title="Link to this heading"></a></h3>
<p>As a warm-up we can try the <a class="reference external" href="https://githistory.xyz/">“Git History” browser</a>
on the README.rst file of the <a class="reference external" href="https://github.com/networkx/networkx">networkx</a> repository:</p>
<ul class="simple">
<li><p>Visit and browse <a class="reference external" href="https://github.githistory.xyz/networkx/networkx/blob/main/README.rst">https://github.githistory.xyz/networkx/networkx/blob/main/README.rst</a> (use left/right keys).</p></li>
<li><p>You can try this on some of your GitHub repositories, too!</p></li>
</ul>
</section>
<section id="searching-text-patterns-in-the-repository">
<h3>Searching text patterns in the repository<a class="headerlink" href="#searching-text-patterns-in-the-repository" title="Link to this heading"></a></h3>
<p>With <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">grep</span></code> you can find all lines in a repository which contain some string or regular expression.
This is useful to find out where in the code some variable is used or
some error message printed.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-Q29tbWFuZCBsaW5l" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="0">Command line</button><button aria-controls="panel-0-R2l0SHVi" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="-1">GitHub</button><button aria-controls="panel-0-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-0-UlN0dWRpbw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tab" tabindex="-1">RStudio</button></div><div aria-labelledby="tab-0-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" id="panel-0-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>The Git command is as described above:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>grep<span class="w"> </span>TEXT
<span class="gp">$ </span>git<span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;some text with spaces&quot;</span>
</pre></div>
</div>
<p>In the <a class="reference external" href="https://github.com/networkx/networkx">networkx</a> repository you can try:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/networkx/networkx
<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>networkx
<span class="gp">$ </span>git<span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>fixme
</pre></div>
</div>
<p>While <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">grep</span></code> searches the <strong>current state</strong> of the repository,
it is also possible to search through all changes with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span> <span class="pre">-S</span> <span class="pre">sometext</span></code>
which can be useful to find where something got removed.</p>
</div><div aria-labelledby="tab-0-R2l0SHVi" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>We can try the same example in the browser:
<a class="reference external" href="https://github.com/search?q=repo%3Anetworkx%2Fnetworkx%20fixme&amp;amp;type=code">https://github.com/search?q=repo%3Anetworkx%2Fnetworkx fixme&amp;type=code</a></p>
<figure class="align-default" id="id1">
<a class="with-border reference internal image-reference" href="../_images/search.png"><img alt="Searching for &quot;fixme&quot; in a GitHub repository" class="with-border" src="../_images/search.png" style="width: 100%;" />
</a>
<figcaption>
<p><span class="caption-text">Searching for “fixme” in a GitHub repository.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
</div><div aria-labelledby="tab-0-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>Our example repository is <a class="reference external" href="https://github.com/networkx/networkx">https://github.com/networkx/networkx</a>.
From a new VS Code window, select “Clone Git repository” and enter
that URL.</p>
<p>Searching with the magnifying glass from the left sidebar is
equivalent to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">grep</span></code>.</p>
</div><div aria-labelledby="tab-0-UlN0dWRpbw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tabpanel" tabindex="0"><p>Edit → Find in files.</p>
<p>Use the command line method for more power.</p>
</div></div>
</section>
<section id="inspecting-individual-commits">
<h3>Inspecting individual commits<a class="headerlink" href="#inspecting-individual-commits" title="Link to this heading"></a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-Q29tbWFuZCBsaW5l" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="0">Command line</button><button aria-controls="panel-1-R2l0SHVi" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="-1">GitHub</button><button aria-controls="panel-1-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-1-UlN0dWRpbw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tab" tabindex="-1">RStudio</button></div><div aria-labelledby="tab-1-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" id="panel-1-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>We have seen this one before already. Using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">show</span></code> we can inspect an individual commit if
we know its hash:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>show<span class="w"> </span>HASH
</pre></div>
</div>
<p>For instance:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>show<span class="w"> </span>759d589bdfa61aff99e0535938f14f67b01c83f7
</pre></div>
</div>
</div><div aria-labelledby="tab-1-R2l0SHVi" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>We can try the same example in the browser:
<a class="reference external" href="https://github.com/networkx/networkx/commit/759d589bdfa61aff99e0535938f14f67b01c83f7">https://github.com/networkx/networkx/commit/759d589bdfa61aff99e0535938f14f67b01c83f7</a></p>
<figure class="align-default" id="id2">
<a class="with-border reference internal image-reference" href="../_images/show.png"><img alt="Inspecting an individual commit on GitHub" class="with-border" src="../_images/show.png" style="width: 100%;" />
</a>
<figcaption>
<p><span class="caption-text">Inspecting an individual commit on GitHub.</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
</div><div aria-labelledby="tab-1-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>We don’t know of a built-in way to see every single Git commit in
order (extensions allow this).  You can open the terminal and run
the command line option.</p>
<p>But, if you open single files, a “Timeline” view under the
explorer shows changes to <em>that file</em>.  You can click on a change
to see the details.</p>
</div><div aria-labelledby="tab-1-UlN0dWRpbw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tabpanel" tabindex="0"><p>The graph view lets you select certain commits for viewing.  The search box lets you search for a certain commit by hash.</p>
<figure class="align-default">
<a class="with-border reference internal image-reference" href="../_images/rstudio-graph-view.png"><img alt="RStudio screenshot as described" class="with-border" src="../_images/rstudio-graph-view.png" style="width: 80%;" />
</a>
</figure>
</div></div>
</section>
<section id="line-by-line-code-annotation-with-metadata">
<h3>Line-by-line code annotation with metadata<a class="headerlink" href="#line-by-line-code-annotation-with-metadata" title="Link to this heading"></a></h3>
<p>With <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">annotate</span></code> you can see line by line who and <strong>when</strong> the line was
modified last. It also prints the precise hash of the last change which
modified each line. Incredibly useful for reproducibility.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-Q29tbWFuZCBsaW5l" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-2-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="0">Command line</button><button aria-controls="panel-2-R2l0SHVi" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="-1">GitHub</button><button aria-controls="panel-2-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-2-UlN0dWRpbw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tab" tabindex="-1">RStudio</button></div><div aria-labelledby="tab-2-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" id="panel-2-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>annotate<span class="w"> </span>FILE
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>annotate<span class="w"> </span>networkx/convert_matrix.py
</pre></div>
</div>
<p>If you annotate in a terminal and the file is longer than the screen, Git by default uses the program <code class="docutils literal notranslate"><span class="pre">less</span></code> to
scroll the output.
Use <code class="docutils literal notranslate"><span class="pre">/sometext</span></code> <code class="docutils literal notranslate"><span class="pre">&lt;ENTER&gt;</span></code> to find “sometext” and you can cycle through the results with <code class="docutils literal notranslate"><span class="pre">n</span></code> (next) and <code class="docutils literal notranslate"><span class="pre">N</span></code> (last).
You can also use page up/down to scroll. You can quit with <code class="docutils literal notranslate"><span class="pre">q</span></code>.</p>
</div><div aria-labelledby="tab-2-R2l0SHVi" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>We can try the same example in the browser:
<a class="reference external" href="https://github.com/networkx/networkx/blame/main/networkx/convert_matrix.py">https://github.com/networkx/networkx/blame/main/networkx/convert_matrix.py</a></p>
<figure class="align-default" id="id3">
<a class="with-border reference internal image-reference" href="../_images/annotate.png"><img alt="Screenshot of file annotation on GitHub" class="with-border" src="../_images/annotate.png" style="width: 100%;" />
</a>
<figcaption>
<p><span class="caption-text">Screenshot of file annotation on GitHub.</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
</div><div aria-labelledby="tab-2-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>It seems this needs an extension.  We’d recommend trying the
command line method for now.</p>
</div><div aria-labelledby="tab-2-UlN0dWRpbw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tabpanel" tabindex="0"><p>Use the command line method (from what we can tell).</p>
</div></div>
<div class="admonition-discuss-how-these-relatively-trivial-changes-affect-the-annotation discussion important admonition" id="discussion-0">
<p class="admonition-title">Discuss how these relatively trivial changes affect the annotation</p>
<ul class="simple">
<li><p>Wrapping long lines of text/code into shorter lines</p></li>
<li><p>Auto-formatting tools such as <code class="docutils literal notranslate"><span class="pre">black</span></code></p></li>
<li><p>Editors that automatically remove trailing whitespace</p></li>
</ul>
</div>
</section>
<section id="inspecting-code-in-the-past">
<h3>Inspecting code in the past<a class="headerlink" href="#inspecting-code-in-the-past" title="Link to this heading"></a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-Q29tbWFuZCBsaW5l" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-3-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="0">Command line</button><button aria-controls="panel-3-R2l0SHVi" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="-1">GitHub</button><button aria-controls="panel-3-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-3-UlN0dWRpbw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tab" tabindex="-1">RStudio</button></div><div aria-labelledby="tab-3-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" id="panel-3-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>We can create branches pointing to a commit in the past.
This is the recommended mechanism to inspect old code:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>--create<span class="w"> </span>BRANCHNAME<span class="w"> </span>HASH
</pre></div>
</div>
<p>Example (lines starting with “#” are only comments):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># create branch called &quot;older-code&quot; from hash 347e6292419b</span>
$<span class="w"> </span>git<span class="w"> </span>switch<span class="w"> </span>--create<span class="w"> </span>older-code<span class="w"> </span>347e6292419bd0e4bff077fe971f983932d7a0e9

<span class="c1"># now you can navigate and inspect the code as it was back then</span>
<span class="c1"># ...</span>

<span class="c1"># after we are done we can switch back to &quot;main&quot;</span>
$<span class="w"> </span>git<span class="w"> </span>switch<span class="w"> </span>main

<span class="c1"># if we like we can delete the &quot;older-code&quot; branch</span>
$<span class="w"> </span>git<span class="w"> </span>branch<span class="w"> </span>-d<span class="w"> </span>older-code
</pre></div>
</div>
<p>On old Git versions which do not know the <code class="docutils literal notranslate"><span class="pre">switch</span></code> command (before 2.23), you
need to use this instead:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>BRANCHNAME<span class="w"> </span>SOMEHASH
</pre></div>
</div>
</div><div aria-labelledby="tab-3-R2l0SHVi" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>We now know how to visit a specific commit:
<a class="reference external" href="https://github.com/networkx/networkx/commit/347e629">https://github.com/networkx/networkx/commit/347e629</a></p>
<p>Once we are there we can “Browse files” at that point in history.</p>
<figure class="align-default" id="id4">
<a class="with-border reference internal image-reference" href="../_images/browse-files.png"><img alt="Browsing code in the past on GitHub" class="with-border" src="../_images/browse-files.png" style="width: 100%;" />
</a>
<figcaption>
<p><span class="caption-text">Browsing code in the past on GitHub.</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
</div><div aria-labelledby="tab-3-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>Switch to “Source Control”, then the “…” menu, then “Branch”, then “Create new branch from…” and now you can type a commit identifier (hash).</p>
<p>Make sure you change back to the main branch when you are done.</p>
</div><div aria-labelledby="tab-3-UlN0dWRpbw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tabpanel" tabindex="0"><p>It seems you can only create branches from the present (at least without extensions). Use the command line method.</p>
</div></div>
</section>
</section>
<section id="exercise">
<h2>Exercise<a class="headerlink" href="#exercise" title="Link to this heading"></a></h2>
<div class="admonition-exercise-explore-basic-archaeology-commands-20-min exercise important admonition" id="exercise-0">
<p class="admonition-title">Exercise: Explore basic archaeology commands (20 min)</p>
<p>Let us explore the value of these commands in an exercise.  Future
exercises do not depend on this, so it is OK if you do not complete
it fully.</p>
<p>Exercise steps:</p>
<ul>
<li><p><strong>Make sure you are not inside another Git repository</strong> when running this
exercise. If you are, first step “outside” of it.
We want to avoid creating a Git repository inside another Git repository.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-Q29tbWFuZCBsaW5l" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-4-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="0">Command line</button><button aria-controls="panel-4-R2l0SHVi" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="-1">GitHub</button><button aria-controls="panel-4-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-4-UlN0dWRpbw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tab" tabindex="-1">RStudio</button></div><div aria-labelledby="tab-4-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" id="panel-4-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>You can check if you are inside a Git repository with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>status

<span class="go">fatal: not a git repository (or any of the parent directories): .git</span>
</pre></div>
</div>
<p>You want to see the above message which tells us that this is not a Git repository.</p>
</div><div aria-labelledby="tab-4-R2l0SHVi" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>This is not a problem in the GitHub web interface since we are not
creating a new local repository.</p>
</div><div aria-labelledby="tab-4-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p><strong>Warning: many of these exercise tasks aren’t possible in the VS Code interface without extensions.  You can use VS Code to clone the project, but be prepared to start the terminal to do the main tasks.</strong></p>
<p>“File” → “New Window”.</p>
</div><div aria-labelledby="tab-4-UlN0dWRpbw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tabpanel" tabindex="0"><p><strong>Warning: many of these exercise tasks aren’t possible in the RStudio interface.  You can use RStudio to clone the project, but be prepared to start the terminal to do the main tasks.</strong></p>
<p>File → New Project.</p>
</div></div>
</li>
<li><p>Clone this repository:
<a class="reference external" href="https://github.com/networkx/networkx.git">https://github.com/networkx/networkx.git</a>.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-Q29tbWFuZCBsaW5l" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-5-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="0">Command line</button><button aria-controls="panel-5-R2l0SHVi" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="-1">GitHub</button><button aria-controls="panel-5-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-5-UlN0dWRpbw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tab" tabindex="-1">RStudio</button></div><div aria-labelledby="tab-5-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" id="panel-5-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/networkx/networkx.git
</pre></div>
</div>
</div><div aria-labelledby="tab-5-R2l0SHVi" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>Nothing to clone. We will try to inspect the repository directly on GitHub.</p>
</div><div aria-labelledby="tab-5-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>From a new VS Code window, select “Clone Git repository” and enter
that URL.</p>
</div><div aria-labelledby="tab-5-UlN0dWRpbw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tabpanel" tabindex="0"><p>From the new project window, choose Version Control → Git → and enter the URL</p>
</div></div>
</li>
<li><p>Then let us all <strong>make sure we are working on a well-defined version</strong> of the repository.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-6-Q29tbWFuZCBsaW5l" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-6-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="0">Command line</button><button aria-controls="panel-6-R2l0SHVi" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-6-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="-1">GitHub</button><button aria-controls="panel-6-VlMgQ29kZQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-6-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tab" tabindex="-1">VS Code</button><button aria-controls="panel-6-UlN0dWRpbw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-6-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tab" tabindex="-1">RStudio</button></div><div aria-labelledby="tab-6-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" id="panel-6-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><p>Step into the new directory and create an exercise branch from the
networkx-2.6.3 tag/release:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>networkx
<span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>--create<span class="w"> </span>exercise<span class="w"> </span>networkx-2.6.3
</pre></div>
</div>
<p>On old Git versions which do not know the <code class="docutils literal notranslate"><span class="pre">switch</span></code> command (before 2.23), you
need to use this instead:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>exercise<span class="w"> </span>networkx-2.6.3
</pre></div>
</div>
</div><div aria-labelledby="tab-6-R2l0SHVi" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-6-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><p>We can visit the version directly: <a class="reference external" href="https://github.com/networkx/networkx/tree/networkx-2.6.3">https://github.com/networkx/networkx/tree/networkx-2.6.3</a></p>
</div><div aria-labelledby="tab-6-VlMgQ29kZQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-6-VlMgQ29kZQ==" name="VlMgQ29kZQ==" role="tabpanel" tabindex="0"><p>Switch to “Source Control”, then the “…” menu, then “Branch”, then “Create new branch from…” and select “networkx-2.6.3”.</p>
</div><div aria-labelledby="tab-6-UlN0dWRpbw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-6-UlN0dWRpbw==" name="UlN0dWRpbw==" role="tabpanel" tabindex="0"><p>Use the command line method (but you don’t need to <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">networkx</span></code>, the RStudio terminal starts in the right place.)  So, run this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>--create<span class="w"> </span>exercise<span class="w"> </span>networkx-2.6.3
</pre></div>
</div>
<p>(and if it doesn’t work, check Command Line for the command for older git)</p>
</div></div>
</li>
</ul>
<p>Then using the above toolbox try to:</p>
<ol class="arabic simple">
<li><p>Find the code line which contains <code class="docutils literal notranslate"><span class="pre">&quot;Logic</span> <span class="pre">error</span> <span class="pre">in</span> <span class="pre">degree_correlation&quot;</span></code>.</p></li>
<li><p>Find out when this line was last modified or added. Find the actual commit which modified that line.</p></li>
<li><p>Inspect the commit. What is the commit change? What is the commit metadata?</p></li>
<li><p>Create a branch pointing to the past when that commit was created to be
able to browse and use the code as it was back then.</p></li>
<li><p>How would you bring the code to the version of the code right before that line was last modified?</p></li>
</ol>
<div class="admonition-solution solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Solution</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-7-Q29tbWFuZCBsaW5l" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-7-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tab" tabindex="0">Command line</button><button aria-controls="panel-7-R2l0SHVi" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-7-R2l0SHVi" name="R2l0SHVi" role="tab" tabindex="-1">GitHub</button></div><div aria-labelledby="tab-7-Q29tbWFuZCBsaW5l" class="sphinx-tabs-panel group-tab" id="panel-7-Q29tbWFuZCBsaW5l" name="Q29tbWFuZCBsaW5l" role="tabpanel" tabindex="0"><ol class="arabic">
<li><p>We use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">grep</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;Logic error in degree_correlation&quot;</span>
</pre></div>
</div>
<p>This gives the output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">networkx</span><span class="o">/</span><span class="n">algorithms</span><span class="o">/</span><span class="n">threshold</span><span class="o">.</span><span class="n">py</span><span class="p">:</span>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Logic error in degree_correlation&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">rdi</span><span class="p">)</span>
</pre></div>
</div>
<p>Maybe you also want to know the line number:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>grep<span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;Logic error in degree_correlation&quot;</span>
</pre></div>
</div>
</li>
<li><p>We use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">annotate</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>annotate<span class="w"> </span>networkx/algorithms/threshold.py
</pre></div>
</div>
<p>Then search for “Logic error” by typing “/Logic error” followed by Enter.
The last commit that modified it was <code class="docutils literal notranslate"><span class="pre">90544b4fa</span></code> (unless that line changed since).</p>
</li>
<li><p>We use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">show</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>show<span class="w"> </span>90544b4fa
</pre></div>
</div>
</li>
<li><p>Create a branch pointing to that commit (here we called the branch “past-code”):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>branch<span class="w"> </span>past-code<span class="w"> </span>90544b4fa
</pre></div>
</div>
</li>
<li><p>This is a compact way to access the first parent of <code class="docutils literal notranslate"><span class="pre">90544b4fa</span></code> (here we
called the branch “just-before”):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>--create<span class="w"> </span>just-before<span class="w"> </span>90544b4fa~1
</pre></div>
</div>
</li>
</ol>
</div><div aria-labelledby="tab-7-R2l0SHVi" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-7-R2l0SHVi" name="R2l0SHVi" role="tabpanel" tabindex="0"><ol class="arabic simple">
<li><p>On top of <a class="reference external" href="https://github.com/networkx/networkx">https://github.com/networkx/networkx</a> click on the
magnifying glass and search for “Logic error in degree_correlation”.
This tells us that the file <code class="docutils literal notranslate"><span class="pre">networkx/algorithms/threshold.py</span></code>
contains this line and you can click on the file.
This brings you to <a class="reference external" href="https://github.com/networkx/networkx/blob/409979eff35f02eff54f4eea3731736bd431dc2e/networkx/algorithms/threshold.py#L550">https://github.com/networkx/networkx/blob/409979eff35f02eff54f4eea3731736bd431dc2e/networkx/algorithms/threshold.py#L550</a>.</p></li>
<li><p>Click on the “Blame” button. Left next to the highlighted line you see
the commit which modified it last.</p></li>
<li><p>You can click on the commit (open in new browser tab) which brings you
to <a class="reference external" href="https://github.com/networkx/networkx/commit/90544b4fa5a7397a86e69ebf5778f4a0f6eafe1e">https://github.com/networkx/networkx/commit/90544b4fa5a7397a86e69ebf5778f4a0f6eafe1e</a>.</p></li>
<li><p>Let’s skip creating the branch on GitHub. Instead, we can browse the
project at this version:
<a class="reference external" href="https://github.com/networkx/networkx/tree/90544b4">https://github.com/networkx/networkx/tree/90544b4</a>.</p></li>
<li><p>Go back to the “Blame” view for the file <code class="docutils literal notranslate"><span class="pre">networkx/algorithms/threshold.py</span></code>:
<a class="reference external" href="https://github.com/networkx/networkx/blame/409979eff35f02eff54f4eea3731736bd431dc2e/networkx/algorithms/threshold.py#L550">https://github.com/networkx/networkx/blame/409979eff35f02eff54f4eea3731736bd431dc2e/networkx/algorithms/threshold.py#L550</a>.
Navigate to the symbol “Blame prior to change …” which you find next to the commit message that modified this line.</p></li>
</ol>
</div></div>
</div>
</div>
</section>
<hr class="docutils" />
<section id="finding-out-when-something-broke-changed-with-git-bisect">
<h2>Finding out when something broke/changed with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span></code><a class="headerlink" href="#finding-out-when-something-broke-changed-with-git-bisect" title="Link to this heading"></a></h2>
<p>This section only works with the command line.</p>
<p><em>“But I am sure it used to work! Strange.”</em> - Sometimes you realize that
something broke.  You know that it used to work.  You do not know <strong>when precisely</strong> it
broke.</p>
<div class="admonition-how-would-you-solve-this discussion important admonition" id="discussion-1">
<p class="admonition-title">How would you solve this?</p>
<p>Before we go on first discuss how you would solve this problem: You know that it worked
500 commits ago but it does not work now.</p>
<ul class="simple">
<li><p>How would you find the commit which changed it?</p></li>
<li><p>Why could it be useful to know the commit that changed it?</p></li>
</ul>
</div>
<p>We will probably arrive at a solution which is similar to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span></code>:</p>
<ul>
<li><p>First find out a commit in past when it worked.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>bisect<span class="w"> </span>start
<span class="gp">$ </span>git<span class="w"> </span>bisect<span class="w"> </span>good<span class="w"> </span>f0ea950<span class="w">  </span><span class="c1"># this is a commit that worked</span>
<span class="gp">$ </span>git<span class="w"> </span>bisect<span class="w"> </span>bad<span class="w"> </span>main<span class="w">      </span><span class="c1"># last commit is broken</span>
</pre></div>
</div>
</li>
<li><p>Now compile and/or run and/or test and decide whether “good” or “bad”.</p></li>
<li><p>This is how you can tell Git that this was a working commit:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>bisect<span class="w"> </span>good
</pre></div>
</div>
</li>
<li><p>And this is how you can tell Git that this was not a working commit:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>bisect<span class="w"> </span>bad
</pre></div>
</div>
</li>
<li><p>Then bisect/iterate your way until you find the commit that broke it.</p></li>
<li><p>If you want to go back to start, type <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span> <span class="pre">reset</span></code>.</p></li>
<li><p>This can even be automatized with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span> <span class="pre">run</span> <span class="pre">SCRIPT</span></code>.
For this you write a script that returns zero/non-zero (success/failure).</p></li>
</ul>
</section>
<section id="optional-exercise-git-bisect">
<span id="exercise-bisect"></span><h2>Optional exercise: Git bisect<a class="headerlink" href="#optional-exercise-git-bisect" title="Link to this heading"></a></h2>
<p>This only works with the command line.</p>
<div class="admonition-optional-use-git-bisect-to-find-the-bad-commit exercise important admonition" id="exercise-1">
<p class="admonition-title">(optional) Use git bisect to find the bad commit</p>
<p>In this exercise, we use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span></code> on an example repository.  It
is OK if you do not complete this exercise fully.</p>
<p>Begin by cloning <a class="reference external" href="https://github.com/coderefinery/git-bisect-exercise">https://github.com/coderefinery/git-bisect-exercise</a>.</p>
<p><strong>Motivation</strong></p>
<p>The motivation for this exercise is to be able to do archaeology with Git on a
source code where the bug is difficult to see visually. <strong>Finding the offending
commit is often more than half the debugging</strong>.</p>
<p><strong>Background</strong></p>
<p>The script <code class="docutils literal notranslate"><span class="pre">get_pi.py</span></code> approximates pi using terms of the Nilakantha series. It
should produce 3.14 but it does not. The script broke at some point and
produces 3.57 using the last commit:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>get_pi.py

<span class="go">3.57</span>
</pre></div>
</div>
<p>At some point within the 500 first commits, an error was introduced. The only
thing we know is that the first commit worked correctly.</p>
<p><strong>Your task</strong></p>
<ul class="simple">
<li><p>Clone this repository and use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span></code> to find the commit which
broke the computation
(<a class="reference external" href="https://github.com/coderefinery/git-bisect-exercise#solutions-spoiler-alert">solution - spoiler alert!</a>).</p></li>
<li><p>Once you have found the offending commit, also practice navigating to the last good commit.</p></li>
<li><p>Bonus exercise:
Write a script that checks for a correct result and use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span> <span class="pre">run</span></code> to
find the offending commit automatically
(<a class="reference external" href="https://github.com/coderefinery/git-bisect-exercise#solutions-spoiler-alert">solution - spoiler alert!</a>).</p></li>
</ul>
<p><strong>Hints</strong></p>
<p>Finding the first commit:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>log<span class="w"> </span>--oneline<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-n<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
<p>How to navigate to the parent of a commit with hash SOMEHASH:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>--create<span class="w"> </span>BRANCHNAME<span class="w"> </span>SOMEHASH~1
</pre></div>
</div>
<p>Instead of a tilde you can also use this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>switch<span class="w"> </span>--create<span class="w"> </span>BRANCHNAME<span class="w"> </span>SOMEHASH^
</pre></div>
</div>
</div>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>git log/grep/annotate/show/bisect is a powerful combination when doing archaeology in a project on the command line.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">switch</span> <span class="pre">--create</span> <span class="pre">NAME</span> <span class="pre">HASH</span></code> is the recommended mechanism to inspect old code on the command line.</p></li>
<li><p>Most of these commands can be used in the GitHub web interface (except <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span></code>).</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../local-workflow/" class="btn btn-neutral float-left" title="Cloning a Git repository and working locally" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../sharing/" class="btn btn-neutral float-right" title="How to turn your project to a Git repo and share it" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright CodeRefinery contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>